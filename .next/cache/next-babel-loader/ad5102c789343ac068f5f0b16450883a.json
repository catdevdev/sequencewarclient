{"ast":null,"code":"/*\n * Name          : joy.js\n * @author       : Roberto D'Amico (Bobboteck)\n * Last modified : 09.06.2020\n * Revision      : 1.1.6\n *\n * Modification History:\n * Date         Version     Modified By\t\tDescription\n * 2020-06-09\t1.1.6\t\tRoberto D'Amico\tFixed Issue #10 and #11\n * 2020-04-20\t1.1.5\t\tRoberto D'Amico\tCorrect: Two sticks in a row, thanks to @liamw9534 for the suggestion\n * 2020-04-03               Roberto D'Amico Correct: InternalRadius when change the size of canvas, thanks to @vanslipon for the suggestion\n * 2020-01-07\t1.1.4\t\tRoberto D'Amico Close #6 by implementing a new parameter to set the functionality of auto-return to 0 position\n * 2019-11-18\t1.1.3\t\tRoberto D'Amico\tClose #5 correct indication of East direction\n * 2019-11-12   1.1.2       Roberto D'Amico Removed Fix #4 incorrectly introduced and restored operation with touch devices\n * 2019-11-12   1.1.1       Roberto D'Amico Fixed Issue #4 - Now JoyStick work in any position in the page, not only at 0,0\n * \n * The MIT License (MIT)\n *\n * Copyright (c) 2015 Roberto D'Amico (Bobboteck)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar JoyStick = function (t, e) {\n  var i = void 0 === (e = e || {}).title ? \"joystick\" : e.title,\n      n = void 0 === e.width ? 0 : e.width,\n      o = void 0 === e.height ? 0 : e.height,\n      r = void 0 === e.internalFillColor ? \"#00AA00\" : e.internalFillColor,\n      h = void 0 === e.internalLineWidth ? 2 : e.internalLineWidth,\n      a = void 0 === e.internalStrokeColor ? \"#003300\" : e.internalStrokeColor,\n      d = void 0 === e.externalLineWidth ? 2 : e.externalLineWidth,\n      f = void 0 === e.externalStrokeColor ? \"#008000\" : e.externalStrokeColor,\n      l = void 0 === e.autoReturnToCenter || e.autoReturnToCenter,\n      s = document.getElementById(t),\n      c = document.createElement(\"canvas\");\n  c.id = i, 0 === n && (n = s.clientWidth), 0 === o && (o = s.clientHeight), c.width = n, c.height = o, s.appendChild(c);\n  var u = c.getContext(\"2d\"),\n      g = 0,\n      v = 2 * Math.PI,\n      p = (c.width - (c.width / 2 + 10)) / 2,\n      C = p + 5,\n      w = p + 30,\n      m = c.width / 2,\n      L = c.height / 2,\n      E = c.width / 10,\n      P = -1 * E,\n      S = c.height / 10,\n      k = -1 * S,\n      W = m,\n      T = L;\n\n  function G() {\n    u.beginPath(), u.arc(m, L, w, 0, v, !1), u.lineWidth = d, u.strokeStyle = f, u.stroke();\n  }\n\n  function x() {\n    u.beginPath(), W < p && (W = C), W + p > c.width && (W = c.width - C), T < p && (T = C), T + p > c.height && (T = c.height - C), u.arc(W, T, p, 0, v, !1);\n    var t = u.createRadialGradient(m, L, 5, m, L, 200);\n    t.addColorStop(0, r), t.addColorStop(1, a), u.fillStyle = t, u.fill(), u.lineWidth = h, u.strokeStyle = a, u.stroke();\n  }\n\n  \"ontouchstart\" in document.documentElement ? (c.addEventListener(\"touchstart\", function (t) {\n    g = 1;\n  }, !1), c.addEventListener(\"touchmove\", function (t) {\n    t.preventDefault(), 1 === g && t.targetTouches[0].target === c && (W = t.targetTouches[0].pageX, T = t.targetTouches[0].pageY, \"BODY\" === c.offsetParent.tagName.toUpperCase() ? (W -= c.offsetLeft, T -= c.offsetTop) : (W -= c.offsetParent.offsetLeft, T -= c.offsetParent.offsetTop), u.clearRect(0, 0, c.width, c.height), G(), x());\n  }, !1), c.addEventListener(\"touchend\", function (t) {\n    g = 0, l && (W = m, T = L);\n    u.clearRect(0, 0, c.width, c.height), G(), x();\n  }, !1)) : (c.addEventListener(\"mousedown\", function (t) {\n    g = 1;\n  }, !1), c.addEventListener(\"mousemove\", function (t) {\n    1 === g && (W = t.pageX, T = t.pageY, \"BODY\" === c.offsetParent.tagName.toUpperCase() ? (W -= c.offsetLeft, T -= c.offsetTop) : (W -= c.offsetParent.offsetLeft, T -= c.offsetParent.offsetTop), u.clearRect(0, 0, c.width, c.height), G(), x());\n  }, !1), c.addEventListener(\"mouseup\", function (t) {\n    g = 0, l && (W = m, T = L);\n    u.clearRect(0, 0, c.width, c.height), G(), x();\n  }, !1)), G(), x(), this.GetWidth = function () {\n    return c.width;\n  }, this.GetHeight = function () {\n    return c.height;\n  }, this.GetPosX = function () {\n    return W;\n  }, this.GetPosY = function () {\n    return T;\n  }, this.GetX = function () {\n    return ((W - m) / C * 100).toFixed();\n  }, this.GetY = function () {\n    return ((T - L) / C * 100 * -1).toFixed();\n  }, this.GetDir = function () {\n    var t = \"\",\n        e = W - m,\n        i = T - L;\n    return i >= k && i <= S && (t = \"C\"), i < k && (t = \"N\"), i > S && (t = \"S\"), e < P && (\"C\" === t ? t = \"W\" : t += \"W\"), e > E && (\"C\" === t ? t = \"E\" : t += \"E\"), t;\n  };\n};","map":{"version":3,"sources":["/Users/vlad/Desktop/projects/UnityProjects/sequencewarclient/utils/joy.min.js"],"names":["JoyStick","t","e","i","title","n","width","o","height","r","internalFillColor","h","internalLineWidth","a","internalStrokeColor","d","externalLineWidth","f","externalStrokeColor","l","autoReturnToCenter","s","document","getElementById","c","createElement","id","clientWidth","clientHeight","appendChild","u","getContext","g","v","Math","PI","p","C","w","m","L","E","P","S","k","W","T","G","beginPath","arc","lineWidth","strokeStyle","stroke","x","createRadialGradient","addColorStop","fillStyle","fill","documentElement","addEventListener","preventDefault","targetTouches","target","pageX","pageY","offsetParent","tagName","toUpperCase","offsetLeft","offsetTop","clearRect","GetWidth","GetHeight","GetPosX","GetPosY","GetX","toFixed","GetY","GetDir"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,IAAIA,QAAQ,GAAC,UAASC,CAAT,EAAWC,CAAX,EAAa;AAAC,MAAIC,CAAC,GAAC,KAAK,CAAL,KAAS,CAACD,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUE,KAAnB,GAAyB,UAAzB,GAAoCF,CAAC,CAACE,KAA5C;AAAA,MAAkDC,CAAC,GAAC,KAAK,CAAL,KAASH,CAAC,CAACI,KAAX,GAAiB,CAAjB,GAAmBJ,CAAC,CAACI,KAAzE;AAAA,MAA+EC,CAAC,GAAC,KAAK,CAAL,KAASL,CAAC,CAACM,MAAX,GAAkB,CAAlB,GAAoBN,CAAC,CAACM,MAAvG;AAAA,MAA8GC,CAAC,GAAC,KAAK,CAAL,KAASP,CAAC,CAACQ,iBAAX,GAA6B,SAA7B,GAAuCR,CAAC,CAACQ,iBAAzJ;AAAA,MAA2KC,CAAC,GAAC,KAAK,CAAL,KAAST,CAAC,CAACU,iBAAX,GAA6B,CAA7B,GAA+BV,CAAC,CAACU,iBAA9M;AAAA,MAAgOC,CAAC,GAAC,KAAK,CAAL,KAASX,CAAC,CAACY,mBAAX,GAA+B,SAA/B,GAAyCZ,CAAC,CAACY,mBAA7Q;AAAA,MAAiSC,CAAC,GAAC,KAAK,CAAL,KAASb,CAAC,CAACc,iBAAX,GAA6B,CAA7B,GAA+Bd,CAAC,CAACc,iBAApU;AAAA,MAAsVC,CAAC,GAAC,KAAK,CAAL,KAASf,CAAC,CAACgB,mBAAX,GAA+B,SAA/B,GAAyChB,CAAC,CAACgB,mBAAnY;AAAA,MAAuZC,CAAC,GAAC,KAAK,CAAL,KAASjB,CAAC,CAACkB,kBAAX,IAA+BlB,CAAC,CAACkB,kBAA1b;AAAA,MAA6cC,CAAC,GAACC,QAAQ,CAACC,cAAT,CAAwBtB,CAAxB,CAA/c;AAAA,MAA0euB,CAAC,GAACF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAA5e;AAA6gBD,EAAAA,CAAC,CAACE,EAAF,GAAKvB,CAAL,EAAO,MAAIE,CAAJ,KAAQA,CAAC,GAACgB,CAAC,CAACM,WAAZ,CAAP,EAAgC,MAAIpB,CAAJ,KAAQA,CAAC,GAACc,CAAC,CAACO,YAAZ,CAAhC,EAA0DJ,CAAC,CAAClB,KAAF,GAAQD,CAAlE,EAAoEmB,CAAC,CAAChB,MAAF,GAASD,CAA7E,EAA+Ec,CAAC,CAACQ,WAAF,CAAcL,CAAd,CAA/E;AAAgG,MAAIM,CAAC,GAACN,CAAC,CAACO,UAAF,CAAa,IAAb,CAAN;AAAA,MAAyBC,CAAC,GAAC,CAA3B;AAAA,MAA6BC,CAAC,GAAC,IAAEC,IAAI,CAACC,EAAtC;AAAA,MAAyCC,CAAC,GAAC,CAACZ,CAAC,CAAClB,KAAF,IAASkB,CAAC,CAAClB,KAAF,GAAQ,CAAR,GAAU,EAAnB,CAAD,IAAyB,CAApE;AAAA,MAAsE+B,CAAC,GAACD,CAAC,GAAC,CAA1E;AAAA,MAA4EE,CAAC,GAACF,CAAC,GAAC,EAAhF;AAAA,MAAmFG,CAAC,GAACf,CAAC,CAAClB,KAAF,GAAQ,CAA7F;AAAA,MAA+FkC,CAAC,GAAChB,CAAC,CAAChB,MAAF,GAAS,CAA1G;AAAA,MAA4GiC,CAAC,GAACjB,CAAC,CAAClB,KAAF,GAAQ,EAAtH;AAAA,MAAyHoC,CAAC,GAAC,CAAC,CAAD,GAAGD,CAA9H;AAAA,MAAgIE,CAAC,GAACnB,CAAC,CAAChB,MAAF,GAAS,EAA3I;AAAA,MAA8IoC,CAAC,GAAC,CAAC,CAAD,GAAGD,CAAnJ;AAAA,MAAqJE,CAAC,GAACN,CAAvJ;AAAA,MAAyJO,CAAC,GAACN,CAA3J;;AAA6J,WAASO,CAAT,GAAY;AAACjB,IAAAA,CAAC,CAACkB,SAAF,IAAclB,CAAC,CAACmB,GAAF,CAAMV,CAAN,EAAQC,CAAR,EAAUF,CAAV,EAAY,CAAZ,EAAcL,CAAd,EAAgB,CAAC,CAAjB,CAAd,EAAkCH,CAAC,CAACoB,SAAF,GAAYnC,CAA9C,EAAgDe,CAAC,CAACqB,WAAF,GAAclC,CAA9D,EAAgEa,CAAC,CAACsB,MAAF,EAAhE;AAA2E;;AAAA,WAASC,CAAT,GAAY;AAACvB,IAAAA,CAAC,CAACkB,SAAF,IAAcH,CAAC,GAACT,CAAF,KAAMS,CAAC,GAACR,CAAR,CAAd,EAAyBQ,CAAC,GAACT,CAAF,GAAIZ,CAAC,CAAClB,KAAN,KAAcuC,CAAC,GAACrB,CAAC,CAAClB,KAAF,GAAQ+B,CAAxB,CAAzB,EAAoDS,CAAC,GAACV,CAAF,KAAMU,CAAC,GAACT,CAAR,CAApD,EAA+DS,CAAC,GAACV,CAAF,GAAIZ,CAAC,CAAChB,MAAN,KAAesC,CAAC,GAACtB,CAAC,CAAChB,MAAF,GAAS6B,CAA1B,CAA/D,EAA4FP,CAAC,CAACmB,GAAF,CAAMJ,CAAN,EAAQC,CAAR,EAAUV,CAAV,EAAY,CAAZ,EAAcH,CAAd,EAAgB,CAAC,CAAjB,CAA5F;AAAgH,QAAIhC,CAAC,GAAC6B,CAAC,CAACwB,oBAAF,CAAuBf,CAAvB,EAAyBC,CAAzB,EAA2B,CAA3B,EAA6BD,CAA7B,EAA+BC,CAA/B,EAAiC,GAAjC,CAAN;AAA4CvC,IAAAA,CAAC,CAACsD,YAAF,CAAe,CAAf,EAAiB9C,CAAjB,GAAoBR,CAAC,CAACsD,YAAF,CAAe,CAAf,EAAiB1C,CAAjB,CAApB,EAAwCiB,CAAC,CAAC0B,SAAF,GAAYvD,CAApD,EAAsD6B,CAAC,CAAC2B,IAAF,EAAtD,EAA+D3B,CAAC,CAACoB,SAAF,GAAYvC,CAA3E,EAA6EmB,CAAC,CAACqB,WAAF,GAActC,CAA3F,EAA6FiB,CAAC,CAACsB,MAAF,EAA7F;AAAwG;;AAAA,oBAAiB9B,QAAQ,CAACoC,eAA1B,IAA2ClC,CAAC,CAACmC,gBAAF,CAAmB,YAAnB,EAAgC,UAAS1D,CAAT,EAAW;AAAC+B,IAAAA,CAAC,GAAC,CAAF;AAAI,GAAhD,EAAiD,CAAC,CAAlD,GAAqDR,CAAC,CAACmC,gBAAF,CAAmB,WAAnB,EAA+B,UAAS1D,CAAT,EAAW;AAACA,IAAAA,CAAC,CAAC2D,cAAF,IAAmB,MAAI5B,CAAJ,IAAO/B,CAAC,CAAC4D,aAAF,CAAgB,CAAhB,EAAmBC,MAAnB,KAA4BtC,CAAnC,KAAuCqB,CAAC,GAAC5C,CAAC,CAAC4D,aAAF,CAAgB,CAAhB,EAAmBE,KAArB,EAA2BjB,CAAC,GAAC7C,CAAC,CAAC4D,aAAF,CAAgB,CAAhB,EAAmBG,KAAhD,EAAsD,WAASxC,CAAC,CAACyC,YAAF,CAAeC,OAAf,CAAuBC,WAAvB,EAAT,IAA+CtB,CAAC,IAAErB,CAAC,CAAC4C,UAAL,EAAgBtB,CAAC,IAAEtB,CAAC,CAAC6C,SAApE,KAAgFxB,CAAC,IAAErB,CAAC,CAACyC,YAAF,CAAeG,UAAlB,EAA6BtB,CAAC,IAAEtB,CAAC,CAACyC,YAAF,CAAeI,SAA/H,CAAtD,EAAgMvC,CAAC,CAACwC,SAAF,CAAY,CAAZ,EAAc,CAAd,EAAgB9C,CAAC,CAAClB,KAAlB,EAAwBkB,CAAC,CAAChB,MAA1B,CAAhM,EAAkOuC,CAAC,EAAnO,EAAsOM,CAAC,EAA9Q,CAAnB;AAAqS,GAAhV,EAAiV,CAAC,CAAlV,CAArD,EAA0Y7B,CAAC,CAACmC,gBAAF,CAAmB,UAAnB,EAA8B,UAAS1D,CAAT,EAAW;AAAC+B,IAAAA,CAAC,GAAC,CAAF,EAAIb,CAAC,KAAG0B,CAAC,GAACN,CAAF,EAAIO,CAAC,GAACN,CAAT,CAAL;AAAiBV,IAAAA,CAAC,CAACwC,SAAF,CAAY,CAAZ,EAAc,CAAd,EAAgB9C,CAAC,CAAClB,KAAlB,EAAwBkB,CAAC,CAAChB,MAA1B,GAAkCuC,CAAC,EAAnC,EAAsCM,CAAC,EAAvC;AAA0C,GAArG,EAAsG,CAAC,CAAvG,CAArb,KAAiiB7B,CAAC,CAACmC,gBAAF,CAAmB,WAAnB,EAA+B,UAAS1D,CAAT,EAAW;AAAC+B,IAAAA,CAAC,GAAC,CAAF;AAAI,GAA/C,EAAgD,CAAC,CAAjD,GAAoDR,CAAC,CAACmC,gBAAF,CAAmB,WAAnB,EAA+B,UAAS1D,CAAT,EAAW;AAAC,UAAI+B,CAAJ,KAAQa,CAAC,GAAC5C,CAAC,CAAC8D,KAAJ,EAAUjB,CAAC,GAAC7C,CAAC,CAAC+D,KAAd,EAAoB,WAASxC,CAAC,CAACyC,YAAF,CAAeC,OAAf,CAAuBC,WAAvB,EAAT,IAA+CtB,CAAC,IAAErB,CAAC,CAAC4C,UAAL,EAAgBtB,CAAC,IAAEtB,CAAC,CAAC6C,SAApE,KAAgFxB,CAAC,IAAErB,CAAC,CAACyC,YAAF,CAAeG,UAAlB,EAA6BtB,CAAC,IAAEtB,CAAC,CAACyC,YAAF,CAAeI,SAA/H,CAApB,EAA8JvC,CAAC,CAACwC,SAAF,CAAY,CAAZ,EAAc,CAAd,EAAgB9C,CAAC,CAAClB,KAAlB,EAAwBkB,CAAC,CAAChB,MAA1B,CAA9J,EAAgMuC,CAAC,EAAjM,EAAoMM,CAAC,EAA7M;AAAiN,GAA5P,EAA6P,CAAC,CAA9P,CAApD,EAAqT7B,CAAC,CAACmC,gBAAF,CAAmB,SAAnB,EAA6B,UAAS1D,CAAT,EAAW;AAAC+B,IAAAA,CAAC,GAAC,CAAF,EAAIb,CAAC,KAAG0B,CAAC,GAACN,CAAF,EAAIO,CAAC,GAACN,CAAT,CAAL;AAAiBV,IAAAA,CAAC,CAACwC,SAAF,CAAY,CAAZ,EAAc,CAAd,EAAgB9C,CAAC,CAAClB,KAAlB,EAAwBkB,CAAC,CAAChB,MAA1B,GAAkCuC,CAAC,EAAnC,EAAsCM,CAAC,EAAvC;AAA0C,GAApG,EAAqG,CAAC,CAAtG,CAAt1B,GAAg8BN,CAAC,EAAj8B,EAAo8BM,CAAC,EAAr8B,EAAw8B,KAAKkB,QAAL,GAAc,YAAU;AAAC,WAAO/C,CAAC,CAAClB,KAAT;AAAe,GAAh/B,EAAi/B,KAAKkE,SAAL,GAAe,YAAU;AAAC,WAAOhD,CAAC,CAAChB,MAAT;AAAgB,GAA3hC,EAA4hC,KAAKiE,OAAL,GAAa,YAAU;AAAC,WAAO5B,CAAP;AAAS,GAA7jC,EAA8jC,KAAK6B,OAAL,GAAa,YAAU;AAAC,WAAO5B,CAAP;AAAS,GAA/lC,EAAgmC,KAAK6B,IAAL,GAAU,YAAU;AAAC,WAAM,CAAC,CAAC9B,CAAC,GAACN,CAAH,IAAMF,CAAN,GAAQ,GAAT,EAAcuC,OAAd,EAAN;AAA8B,GAAnpC,EAAopC,KAAKC,IAAL,GAAU,YAAU;AAAC,WAAM,CAAC,CAAC/B,CAAC,GAACN,CAAH,IAAMH,CAAN,GAAQ,GAAR,GAAY,CAAC,CAAd,EAAiBuC,OAAjB,EAAN;AAAiC,GAA1sC,EAA2sC,KAAKE,MAAL,GAAY,YAAU;AAAC,QAAI7E,CAAC,GAAC,EAAN;AAAA,QAASC,CAAC,GAAC2C,CAAC,GAACN,CAAb;AAAA,QAAepC,CAAC,GAAC2C,CAAC,GAACN,CAAnB;AAAqB,WAAOrC,CAAC,IAAEyC,CAAH,IAAMzC,CAAC,IAAEwC,CAAT,KAAa1C,CAAC,GAAC,GAAf,GAAoBE,CAAC,GAACyC,CAAF,KAAM3C,CAAC,GAAC,GAAR,CAApB,EAAiCE,CAAC,GAACwC,CAAF,KAAM1C,CAAC,GAAC,GAAR,CAAjC,EAA8CC,CAAC,GAACwC,CAAF,KAAM,QAAMzC,CAAN,GAAQA,CAAC,GAAC,GAAV,GAAcA,CAAC,IAAE,GAAvB,CAA9C,EAA0EC,CAAC,GAACuC,CAAF,KAAM,QAAMxC,CAAN,GAAQA,CAAC,GAAC,GAAV,GAAcA,CAAC,IAAE,GAAvB,CAA1E,EAAsGA,CAA7G;AAA+G,GAAt2C;AAAu2C,CAAr/E","sourcesContent":["/*\n * Name          : joy.js\n * @author       : Roberto D'Amico (Bobboteck)\n * Last modified : 09.06.2020\n * Revision      : 1.1.6\n *\n * Modification History:\n * Date         Version     Modified By\t\tDescription\n * 2020-06-09\t1.1.6\t\tRoberto D'Amico\tFixed Issue #10 and #11\n * 2020-04-20\t1.1.5\t\tRoberto D'Amico\tCorrect: Two sticks in a row, thanks to @liamw9534 for the suggestion\n * 2020-04-03               Roberto D'Amico Correct: InternalRadius when change the size of canvas, thanks to @vanslipon for the suggestion\n * 2020-01-07\t1.1.4\t\tRoberto D'Amico Close #6 by implementing a new parameter to set the functionality of auto-return to 0 position\n * 2019-11-18\t1.1.3\t\tRoberto D'Amico\tClose #5 correct indication of East direction\n * 2019-11-12   1.1.2       Roberto D'Amico Removed Fix #4 incorrectly introduced and restored operation with touch devices\n * 2019-11-12   1.1.1       Roberto D'Amico Fixed Issue #4 - Now JoyStick work in any position in the page, not only at 0,0\n * \n * The MIT License (MIT)\n *\n * Copyright (c) 2015 Roberto D'Amico (Bobboteck)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar JoyStick=function(t,e){var i=void 0===(e=e||{}).title?\"joystick\":e.title,n=void 0===e.width?0:e.width,o=void 0===e.height?0:e.height,r=void 0===e.internalFillColor?\"#00AA00\":e.internalFillColor,h=void 0===e.internalLineWidth?2:e.internalLineWidth,a=void 0===e.internalStrokeColor?\"#003300\":e.internalStrokeColor,d=void 0===e.externalLineWidth?2:e.externalLineWidth,f=void 0===e.externalStrokeColor?\"#008000\":e.externalStrokeColor,l=void 0===e.autoReturnToCenter||e.autoReturnToCenter,s=document.getElementById(t),c=document.createElement(\"canvas\");c.id=i,0===n&&(n=s.clientWidth),0===o&&(o=s.clientHeight),c.width=n,c.height=o,s.appendChild(c);var u=c.getContext(\"2d\"),g=0,v=2*Math.PI,p=(c.width-(c.width/2+10))/2,C=p+5,w=p+30,m=c.width/2,L=c.height/2,E=c.width/10,P=-1*E,S=c.height/10,k=-1*S,W=m,T=L;function G(){u.beginPath(),u.arc(m,L,w,0,v,!1),u.lineWidth=d,u.strokeStyle=f,u.stroke()}function x(){u.beginPath(),W<p&&(W=C),W+p>c.width&&(W=c.width-C),T<p&&(T=C),T+p>c.height&&(T=c.height-C),u.arc(W,T,p,0,v,!1);var t=u.createRadialGradient(m,L,5,m,L,200);t.addColorStop(0,r),t.addColorStop(1,a),u.fillStyle=t,u.fill(),u.lineWidth=h,u.strokeStyle=a,u.stroke()}\"ontouchstart\"in document.documentElement?(c.addEventListener(\"touchstart\",function(t){g=1},!1),c.addEventListener(\"touchmove\",function(t){t.preventDefault(),1===g&&t.targetTouches[0].target===c&&(W=t.targetTouches[0].pageX,T=t.targetTouches[0].pageY,\"BODY\"===c.offsetParent.tagName.toUpperCase()?(W-=c.offsetLeft,T-=c.offsetTop):(W-=c.offsetParent.offsetLeft,T-=c.offsetParent.offsetTop),u.clearRect(0,0,c.width,c.height),G(),x())},!1),c.addEventListener(\"touchend\",function(t){g=0,l&&(W=m,T=L);u.clearRect(0,0,c.width,c.height),G(),x()},!1)):(c.addEventListener(\"mousedown\",function(t){g=1},!1),c.addEventListener(\"mousemove\",function(t){1===g&&(W=t.pageX,T=t.pageY,\"BODY\"===c.offsetParent.tagName.toUpperCase()?(W-=c.offsetLeft,T-=c.offsetTop):(W-=c.offsetParent.offsetLeft,T-=c.offsetParent.offsetTop),u.clearRect(0,0,c.width,c.height),G(),x())},!1),c.addEventListener(\"mouseup\",function(t){g=0,l&&(W=m,T=L);u.clearRect(0,0,c.width,c.height),G(),x()},!1)),G(),x(),this.GetWidth=function(){return c.width},this.GetHeight=function(){return c.height},this.GetPosX=function(){return W},this.GetPosY=function(){return T},this.GetX=function(){return((W-m)/C*100).toFixed()},this.GetY=function(){return((T-L)/C*100*-1).toFixed()},this.GetDir=function(){var t=\"\",e=W-m,i=T-L;return i>=k&&i<=S&&(t=\"C\"),i<k&&(t=\"N\"),i>S&&(t=\"S\"),e<P&&(\"C\"===t?t=\"W\":t+=\"W\"),e>E&&(\"C\"===t?t=\"E\":t+=\"E\"),t}};"]},"metadata":{},"sourceType":"script"}